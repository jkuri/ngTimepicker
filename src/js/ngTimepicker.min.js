!function(){angular.module("jkuri.timepicker",[]).directive("ngTimepicker",["$document",function(e){var t=function(e,t){e.initTime=t.initTime||"11:00",e.step=t.step||"15",e.showMeridian=t.showMeridian||!1,e.meridian=t.meridian||"AM",e.theme=t.theme||"",e.editable=t.editable||!0},n=function(e){var t=e.firstChild,n=t.offsetTop+t.offsetHeight,i=t.offsetLeft;return{top:n-1,left:i}};return{restrict:"EA",scope:!0,require:"?ngModel",link:function(i,r,o,a){t(i,o),i.opened=!1;var s=n(r[0]);i.left=s.left+"px",i.top=s.top+"px";var u=function(){var e=i.initTime.split(":");i.hour=e[0],i.minutes=e[1]},c=function(){return isNaN(i.hour)||isNaN(i.minutes)?!1:!0},d=function(){var e;i.showMeridian?(e=i.hour+":"+i.minutes,i.viewValue=e+" "+i.meridian,e=l()+":"+i.minutes,a.$setViewValue(e)):(e=i.hour+":"+i.minutes,i.viewValue=e,a.$setViewValue(e))},l=function(){var e=parseInt(i.hour,10);return 12===e&&"PM"===i.meridian?12:12===e&&"AM"===i.meridian?"00":"PM"===i.meridian?e+12:0===e?12:10>e?"0"+e:e};i.showTimepicker=function(){i.opened=!0},i.incrementHour=function(){i.showMeridian?12===parseInt(i.hour,10)?i.hour=1:11===parseInt(i.hour,10)?(i.hour=12,i.toggleMeridian()):i.hour=parseInt(i.hour,10)+1:parseInt(i.hour,10)<23?i.hour=parseInt(i.hour,10)+1:i.hour=0,parseInt(i.hour,10)<10&&(i.hour="0"+i.hour),d()},i.decreaseHour=function(){i.showMeridian?1===parseInt(i.hour,10)?i.hour=12:12===parseInt(i.hour,10)?(i.hour=11,i.toggleMeridian()):i.hour=parseInt(i.hour,10)-1:0===parseInt(i.hour,10)?i.hour=23:i.hour=parseInt(i.hour,10)-1,parseInt(i.hour,10)<10&&(i.hour="0"+i.hour),d()},i.incrementMinutes=function(){i.minutes=parseInt(i.minutes,10)+parseInt(i.step,10),i.minutes>59&&(i.minutes="00",i.incrementHour()),d()},i.decreaseMinutes=function(){i.minutes=parseInt(i.minutes,10)-parseInt(i.step,10),parseInt(i.minutes,10)<0&&(i.minutes=60-parseInt(i.step,10),i.decreaseHour()),0===parseInt(i.minutes,10)&&(i.minutes="00"),d()},i.keyDown=function(e,t){40===e.keyCode?"minutes"==t?i.decreaseMinutes():i.decreaseHour():38===e.keyCode&&("minutes"==t?i.incrementMinutes():i.incrementHour())},i.toggleMeridian=function(){i.meridian="AM"===i.meridian?"PM":"AM",d()},i.edit=function(){i.editable&&c()&&d()},e.on("click",function(e){r===e.target||r[0].contains(e.target)||i.$apply(function(){i.opened=!1})}),u(),d()},template:'<input type="text" ng-focus="showTimepicker()" ng-value="viewValue" class="ng-timepicker-input" ng-readonly="true"><div class="ng-timepicker" ng-show="opened" ng-style="{\'left\': left, \'top\': top}">  <table>    <tbody>    <tr>        <td class="act noselect" ng-click="incrementHour()"><i class="fa fa-angle-up"></i></td>        <td></td>        <td class="act noselect" ng-click="incrementMinutes()"><i class="fa fa-angle-up"></i></td>        <td class="act noselect" ng-click="toggleMeridian()" ng-show="showMeridian"><i class="fa fa-angle-up"></i></td>      </tr>      <tr>        <td><input type="text" ng-model="hour" ng-readonly="!editable" ng-keydown="keyDown($event, \'hours\');" ng-change="edit()"></td>        <td>:</td>        <td><input type="text" ng-model="minutes" ng-readonly="!editable" ng-keydown="keyDown($event, \'minutes\');" ng-change="edit()"></td>        <td ng-show="showMeridian"><input type="text" ng-model="meridian" ng-readonly="true"></td>      </tr>      <tr>        <td class="act noselect" ng-click="decreaseHour()"><i class="fa fa-angle-down"></i></td>        <td></td>        <td class="act noselect" ng-click="decreaseMinutes()"><i class="fa fa-angle-down"></i></td>        <td class="act noselect" ng-click="toggleMeridian()" ng-show="showMeridian"><i class="fa fa-angle-down"></i></td>      </tr>  </table></div>'}}])}();
